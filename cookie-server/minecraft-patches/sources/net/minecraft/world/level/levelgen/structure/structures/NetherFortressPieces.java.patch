--- a/net/minecraft/world/level/levelgen/structure/structures/NetherFortressPieces.java
+++ b/net/minecraft/world/level/levelgen/structure/structures/NetherFortressPieces.java
@@ -1,8 +_,10 @@
 package net.minecraft.world.level.levelgen.structure.structures;
 
 import com.google.common.collect.Lists;
+import java.util.Collections;
 import java.util.List;
 import javax.annotation.Nullable;
+import io.cookiemc.cookie.util.chunk.XPieceDataExtension;
 import net.minecraft.core.BlockPos;
 import net.minecraft.core.Direction;
 import net.minecraft.nbt.CompoundTag;
@@ -643,7 +_,7 @@
         private static final int WIDTH = 5;
         private static final int HEIGHT = 7;
         private static final int DEPTH = 5;
-        private boolean isNeedingChest;
+        private volatile boolean isNeedingChest; // cookie - volatile
 
         public CastleSmallCorridorLeftTurnPiece(int genDepth, RandomSource random, BoundingBox box, Direction orientation) {
             super(StructurePieceType.NETHER_FORTRESS_CASTLE_SMALL_CORRIDOR_LEFT_TURN, genDepth, box);
@@ -773,7 +_,7 @@
         private static final int WIDTH = 5;
         private static final int HEIGHT = 7;
         private static final int DEPTH = 5;
-        private boolean isNeedingChest;
+        private volatile boolean isNeedingChest; // cookie - volatile
 
         public CastleSmallCorridorRightTurnPiece(int genDepth, RandomSource random, BoundingBox box, Direction orientation) {
             super(StructurePieceType.NETHER_FORTRESS_CASTLE_SMALL_CORRIDOR_RIGHT_TURN, genDepth, box);
@@ -1008,7 +_,7 @@
         private static final int WIDTH = 7;
         private static final int HEIGHT = 8;
         private static final int DEPTH = 9;
-        private boolean hasPlacedSpawner;
+        private volatile boolean hasPlacedSpawner; // cookie - volatile
 
         public MonsterThrone(int genDepth, BoundingBox box, Direction orientation) {
             super(StructurePieceType.NETHER_FORTRESS_MONSTER_THRONE, genDepth, box);
@@ -1094,7 +_,7 @@
         }
     }
 
-    abstract static class NetherBridgePiece extends StructurePiece {
+    public abstract static class NetherBridgePiece extends StructurePiece { // cookie - public
         protected NetherBridgePiece(StructurePieceType type, int genDepth, BoundingBox boundingBox) {
             super(type, genDepth, boundingBox);
         }
@@ -1112,7 +_,7 @@
             int i = 0;
 
             for (NetherFortressPieces.PieceWeight pieceWeight : weights) {
-                if (pieceWeight.maxPlaceCount > 0 && pieceWeight.placeCount < pieceWeight.maxPlaceCount) {
+                if (pieceWeight.maxPlaceCount > 0 && pieceWeight.placeCount.get() < pieceWeight.maxPlaceCount) { // cookie
                     flag = true;
                 }
 
@@ -1152,7 +_,7 @@
                             pieceWeight, pieces, random, x, y, z, orientation, genDepth
                         );
                         if (netherBridgePiece != null) {
-                            pieceWeight.placeCount++;
+                            pieceWeight.placeCount.set(pieceWeight.placeCount.get() + 1); // cookie
                             startPiece.previousPiece = pieceWeight;
                             if (!pieceWeight.isValid()) {
                                 weights.remove(pieceWeight);
@@ -1387,7 +_,7 @@
     static class PieceWeight {
         public final Class<? extends NetherFortressPieces.NetherBridgePiece> pieceClass;
         public final int weight;
-        public int placeCount;
+        public final ThreadLocal<Integer> placeCount = ThreadLocal.withInitial(() -> 0); // cookie
         public final int maxPlaceCount;
         public final boolean allowInRow;
 
@@ -1403,11 +_,11 @@
         }
 
         public boolean doPlace(int genDepth) {
-            return this.maxPlaceCount == 0 || this.placeCount < this.maxPlaceCount;
+            return this.maxPlaceCount == 0 || this.placeCount.get() < this.maxPlaceCount; // cookie
         }
 
         public boolean isValid() {
-            return this.maxPlaceCount == 0 || this.placeCount < this.maxPlaceCount;
+            return this.maxPlaceCount == 0 || this.placeCount.get() < this.maxPlaceCount; // cookie
         }
     }
 
@@ -1545,24 +_,24 @@
     }
 
     public static class StartPiece extends NetherFortressPieces.BridgeCrossing {
-        public NetherFortressPieces.PieceWeight previousPiece;
+        public volatile NetherFortressPieces.PieceWeight previousPiece; // cookie - volatile
         public List<NetherFortressPieces.PieceWeight> availableBridgePieces;
         public List<NetherFortressPieces.PieceWeight> availableCastlePieces;
         public final List<StructurePiece> pendingChildren = Lists.newArrayList();
 
         public StartPiece(RandomSource random, int x, int z) {
             super(x, z, getRandomHorizontalDirection(random));
-            this.availableBridgePieces = Lists.newArrayList();
+            this.availableBridgePieces = Collections.synchronizedList(Lists.newArrayList()); // cookie
 
             for (NetherFortressPieces.PieceWeight pieceWeight : NetherFortressPieces.BRIDGE_PIECE_WEIGHTS) {
-                pieceWeight.placeCount = 0;
+                pieceWeight.placeCount.remove(); // cookie
                 this.availableBridgePieces.add(pieceWeight);
             }
 
-            this.availableCastlePieces = Lists.newArrayList();
+            this.availableCastlePieces = Collections.synchronizedList(Lists.newArrayList()); // cookie
 
             for (NetherFortressPieces.PieceWeight pieceWeight : NetherFortressPieces.CASTLE_PIECE_WEIGHTS) {
-                pieceWeight.placeCount = 0;
+                pieceWeight.placeCount.remove(); // cookie
                 this.availableCastlePieces.add(pieceWeight);
             }
         }
