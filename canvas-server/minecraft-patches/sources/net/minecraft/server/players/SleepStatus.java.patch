--- a/net/minecraft/server/players/SleepStatus.java
+++ b/net/minecraft/server/players/SleepStatus.java
@@ -15,9 +_,24 @@
 
     public boolean areEnoughDeepSleeping(int requiredSleepPercentage, List<ServerPlayer> sleepingPlayers) {
         // CraftBukkit start
-        int i = (int) sleepingPlayers.stream().filter(player -> player.isSleepingLongEnough() || player.fauxSleeping || (player.level().purpurConfig.idleTimeoutCountAsSleeping && player.isAfk())).count(); // Purpur - AFK API
-        boolean anyDeepSleep = sleepingPlayers.stream().anyMatch(Player::isSleepingLongEnough);
-        return anyDeepSleep && i >= this.sleepersNeeded(requiredSleepPercentage);
+        // Canvas start - Remove stream and double iteration in enough deep sleeping player check
+        int count = 0;
+        boolean anyPlayerSleeping = false;
+
+        for (ServerPlayer player : sleepingPlayers) {
+            final boolean isSleepingLongEnough = player.isSleepingLongEnough();
+
+            if (isSleepingLongEnough) {
+                anyPlayerSleeping = true;
+            }
+
+            if (isSleepingLongEnough || player.fauxSleeping || (player.level().purpurConfig.idleTimeoutCountAsSleeping && player.isAfk())) { // Purpur - AFK API
+                count++;
+            }
+        }
+
+        return anyPlayerSleeping && count >= this.sleepersNeeded(requiredSleepPercentage);
+        // Canvas end - Remove stream and double iteration in enough deep sleeping player check
         // CraftBukkit end
     }
 
